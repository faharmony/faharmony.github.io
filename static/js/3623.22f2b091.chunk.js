"use strict";(self.webpackChunkplayground=self.webpackChunkplayground||[]).push([[3623],{83623:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ye}});var r={};n.r(r),n.d(r,{closeProcessModal:function(){return K},openProcessModal:function(){return z},selectProcess:function(){return _},setActiveTask:function(){return J},setProcessPayload:function(){return G}});var o,a,i,s,c,l,u=n(11026),d=n(6380),f=n(74851),p=n(37878),y=n(56167),v=n(19278),m=n(36188),h=n(88573),g=n(25200),S=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)},x=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},k=function(e){var t=e.header,n=e.options,r=e.onOptionSelected,o=e.onBack,a=void 0===o?void 0:o,i=e.headless,s=void 0!==i&&i,c=e.enableFiltering,l=void 0!==c&&c,u=x((0,y.useState)(""),2),g=u[0],S=u[1];return(0,p.jsxs)(d.Cl,b({style:{overflowX:"hidden"},headerHidden:s||!t,headerTitle:!s&&t&&(0,p.jsxs)(P,{children:[a&&(0,p.jsx)("div",b({style:{marginTop:-4}},{children:(0,p.jsx)(v.zx,{icon:m.acZ,spacing:"sm",outline:!0,onClick:a})})),"string"===typeof t?(0,p.jsx)(v.xv,b({variant:"h5",truncate:!0},{children:t})):{header:t}]})},{children:[l&&(0,p.jsx)(O,{onChange:function(e){S(e.target.value)},value:g,autoFocus:!0,placeholder:"Filter"}),(0,p.jsx)("div",b({style:{paddingTop:8,paddingBottom:8}},{children:(0,p.jsx)(f.M_,{children:n.filter((function(e){return e.label.toLowerCase().includes(g.toLowerCase())})).map((function(e){return(0,p.jsxs)(E,b({transition:{duration:.15,ease:"easeOut"},initial:{opacity:0,x:24},animate:{opacity:1,x:0},exit:{opacity:0,x:24},onClick:function(){r(e),S("")}},{children:[(0,p.jsx)("div",b({style:{flexGrow:1}},{children:e.label})),e.options&&(0,p.jsx)(v.JO,{icon:h.faChevronRight})]}),e.key||e.label)}))})}))]}))},I=f.rS.color,T=f.rS.spacing,E=(0,f.zo)(f.ww.div)(o||(o=S(["\n  display: flex;\n  padding: 8px;\n  &:hover {\n    cursor: pointer;\n    background-color: ",";\n  }\n"],["\n  display: flex;\n  padding: 8px;\n  &:hover {\n    cursor: pointer;\n    background-color: ",";\n  }\n"])),I.background.hover),O=(0,f.zo)(g.nv)(a||(a=S(["\n  padding-top: ",";\n  padding-bottom: ",";\n  padding-left: ",";\n  padding-right: ",";\n"],["\n  padding-top: ",";\n  padding-bottom: ",";\n  padding-left: ",";\n  padding-right: ",";\n"])),T.sm,T.sm,T.sm,T.sm),P=f.zo.div(i||(i=S(["\n  display: flex;\n  gap: 8px;\n  align-items: flex-start;\n"],["\n  display: flex;\n  gap: 8px;\n  align-items: flex-start;\n"]))),w=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)},A=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},C=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},j=function(e){var t=e.optionsTree,n=e.onOptionSelected,r=e.headless,o=void 0!==r&&r,a=e.enableFiltering,i=void 0!==a&&a,s=A((0,y.useState)([t]),2),c=s[0],l=s[1],u=A((0,y.useState)([]),2),d=u[0],v=u[1];return(0,p.jsx)(D,{children:(0,p.jsx)(f.M_,{children:c.map((function(e,r){var a=e.label,s=void 0===a?"":a,u=e.options;return(0,p.jsx)(U,R({transition:{duration:.2,ease:"easeOut"},initial:{opacity:0,x:0},animate:{opacity:1,x:0},exit:{opacity:0,x:0}},{children:(0,p.jsx)(k,{header:s,options:u,headless:o,enableFiltering:i,onBack:c.length>1?function(){l(c.slice(0,-1)),v(d.slice(0,-1))}:void 0,onOptionSelected:function(e){var r=C(C([],A(d),!1),[e],!1);if(v(r),!e.options)return l([t]),v([]),n(r);l(C(C([],A(c),!1),[e],!1))}})}),r)}))})})},D=f.zo.div(s||(s=w(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  min-width: 80px;\n  min-height: 80px;\n"],["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  min-width: 80px;\n  min-height: 80px;\n"]))),U=(0,f.zo)(f.ww.div)(c||(c=w(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n"]))),M=n(26536),B=n(68432),Y=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},F=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},L=(0,M.Ps)(l||(l=Y(["\n  query getProcessDefinitions($category: String!, $maxCount: Int) {\n    processDefinitions(maxCount: $maxCount, category: $category) {\n      processDefinition {\n        id\n        key\n        name\n        category\n        description\n      }\n      total\n    }\n  }\n"],["\n  query getProcessDefinitions($category: String!, $maxCount: Int) {\n    processDefinitions(maxCount: $maxCount, category: $category) {\n      processDefinition {\n        id\n        key\n        name\n        category\n        description\n      }\n      total\n    }\n  }\n"]))),$=n(88182),N={modalMode:"closed",selectedProcess:void 0,activeTask:void 0,processPayload:void 0},_=function(e,t){var n=t.payload;e.selectedProcess=n},G=function(e,t){var n=t.payload;e.processPayload=n},J=function(e,t){var n=t.payload;e.activeTask=n},z=function(e){e.modalMode="open"},K=function(e){e.modalMode="closed",e.selectedProcess=void 0},W="tasksmanager",H=(0,$.tP)({name:W,initialState:N,reducers:r}),V=(0,$.ee)(W),q=V.useModuleState,Q=V.useModuleStateSelector,Z=H.actions,X=n(61238),ee=n(99017),te=n(95910),ne=n(70188),re=n(82741),oe=n(47038),ae=n(92158),ie=n(72198);function se(e,t){var n=(0,ie.x)(null===t||void 0===t?void 0:t.client);(0,oe.Vp)(e,oe.n_.Mutation);var r=(0,y.useState)({called:!1,loading:!1,client:n}),o=r[0],a=r[1],i=(0,y.useRef)({result:o,mutationId:0,isMounted:!0,client:n,mutation:e,options:t});Object.assign(i.current,{client:n,options:t,mutation:e});var s=(0,y.useCallback)((function(e){void 0===e&&(e={});var t=i.current,n=t.client,r=t.options,o=t.mutation,s=(0,te.pi)((0,te.pi)({},r),{mutation:o});i.current.result.loading||s.ignoreResults||a(i.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:n});var c=++i.current.mutationId,l=(0,ne.J)(s,e);return n.mutate(l).then((function(t){var r,o,s,u=t.data,d=t.errors,f=d&&d.length>0?new ae.c({graphQLErrors:d}):void 0;if(c===i.current.mutationId&&!l.ignoreResults){var p={called:!0,loading:!1,data:u,error:f,client:n};i.current.isMounted&&!(0,re.D)(i.current.result,p)&&a(i.current.result=p)}return null===(o=null===(r=i.current.options)||void 0===r?void 0:r.onCompleted)||void 0===o||o.call(r,t.data),null===(s=e.onCompleted)||void 0===s||s.call(e,t.data),t})).catch((function(t){var r,o,s,u;if(c===i.current.mutationId&&i.current.isMounted){var d={loading:!1,error:t,data:void 0,called:!0,client:n};(0,re.D)(i.current.result,d)||a(i.current.result=d)}if((null===(r=i.current.options)||void 0===r?void 0:r.onError)||l.onError)return null===(s=null===(o=i.current.options)||void 0===o?void 0:o.onError)||void 0===s||s.call(o,t),null===(u=e.onError)||void 0===u||u.call(e,t),{data:void 0,errors:t};throw t}))}),[]),c=(0,y.useCallback)((function(){a({called:!1,loading:!1,client:n})}),[]);return(0,y.useEffect)((function(){return i.current.isMounted=!0,function(){i.current.isMounted=!1}}),[]),[s,(0,te.pi)({reset:c},o)]}var ce,le=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},ue=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},de=(0,ee.Ps)(ce||(ce=le(["\n  mutation ($taskId: String, $data: Json) {\n    completeProcessTask(\n      taskId: $taskId\n      data: $data\n    ) {\n      formKey\n      formDefinition\n      taskId\n      processInstanceId\n      data\n    }\n  }\n"],["\n  mutation ($taskId: String, $data: Json) {\n    completeProcessTask(\n      taskId: $taskId\n      data: $data\n    ) {\n      formKey\n      formDefinition\n      taskId\n      processInstanceId\n      data\n    }\n  }\n"]))),fe=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},pe=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},ye=(0,ee.Ps)(ve||(ve=fe(["\n  mutation startProcess($key: String, $data: Json) {\n    startProcess(key: $key, data: $data) {\n      assignee\n      candidateGroups\n      attachments\n      candidateUsers\n      category\n      claimTime\n      createTime\n      data\n      description\n      dueDate\n      formDefinition\n      formKey\n      id\n      name\n      owner\n      parentTaskId\n      priority\n      processDefinitionId\n      processInstanceId\n      taskDefinitionKey\n      taskId\n    }\n  }\n"],["\n  mutation startProcess($key: String, $data: Json) {\n    startProcess(key: $key, data: $data) {\n      assignee\n      candidateGroups\n      attachments\n      candidateUsers\n      category\n      claimTime\n      createTime\n      data\n      description\n      dueDate\n      formDefinition\n      formKey\n      id\n      name\n      owner\n      parentTaskId\n      priority\n      processDefinitionId\n      processInstanceId\n      taskDefinitionKey\n      taskId\n    }\n  }\n"])));var ve,me=function(e,t){var n=pe(se(ye,{variables:{key:e,data:t&&Object.keys(t).length?t:null},onCompleted:function(e){var t;(null===(t=e.startProcess)||void 0===t?void 0:t.formKey)||(0,B.fz)({id:"start-process-success",title:"Success",description:"Workflow started successfully",variant:"positive"})},onError:function(e){console.error(e),(0,B.fz)({id:"start-process-error",title:"Error",description:e.message,variant:"negative",persist:!0})}}),1);return{startProcess:n[0]}},he=function(){return he=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},he.apply(this,arguments)},ge=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function s(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},Se=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(s){a=[6,s],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},be=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},xe={executorState:"LOADING"},ke=function(e,t){var n;switch(t.type){case"UPDATE_DATA":var r=t.payload,o=null!==(n=r.executorState)&&void 0!==n?n:e.executorState;return"READY"===o||"SUBMITTING"===o||"SUBMIT_ERROR"===o?he(he({},e),r):{executorState:o};case"SET_DATA":return t.payload;case"RESET_SUBMIT_ERROR":return"READY"===e.executorState||"SUBMITTING"===e.executorState||"SUBMIT_ERROR"===e.executorState?he(he({},e),{executorState:"READY"}):e;default:throw new Error}},Ie="formSubmitEvent",Te=function(e){return e?Object.values(e):[]},Ee=function(e){var t=(0,$.I0)(),n=be((0,y.useReducer)(ke,xe),2),r=n[0],o=n[1];Oe(o);var a=function(){var e=ue(se(de,{onCompleted:function(e){var t;(null===(t=e.completeProcessTask)||void 0===t?void 0:t.formKey)||(0,B.fz)({id:"start-process-success",title:"Success",description:"Workflow started successfully",variant:"positive"})},onError:function(e){console.error(e),(0,B.fz)({id:"start-process-error",title:"Error",description:e.message,variant:"negative",persist:!0})}}),2),t=e[0],n=e[1],r=n.data;return{loading:n.loading,error:n.error,reset:n.reset,data:r,completeTask:t}}().completeTask,i=(0,y.useCallback)((function(n){return ge(void 0,void 0,void 0,(function(){var i,s,c,l,u,d,f;return Se(this,(function(p){switch(p.label){case 0:if(i=n.detail,"READY"!==r.executorState||!i)return[2];o({type:"UPDATE_DATA",payload:{executorState:"SUBMITTING"}}),p.label=1;case 1:return p.trys.push([1,3,,4]),(null===(l=null===i||void 0===i?void 0:i.data)||void 0===l?void 0:l.import)&&!Array.isArray(null===(u=null===i||void 0===i?void 0:i.data)||void 0===u?void 0:u.import)&&(i.data.import=[null===(d=null===i||void 0===i?void 0:i.data)||void 0===d?void 0:d.import]),[4,a({variables:{data:i.data,taskId:r.taskId,processInstanceId:r.processInstanceId}})];case 2:return s=p.sent(),Pe(null===(f=s.data)||void 0===f?void 0:f.completeProcessTask,o,(function(e){return t(Z.setActiveTask(e))})).processFinished&&(t(Z.closeProcessModal()),e&&e()),[3,4];case 3:return c=p.sent(),console.error("handleSubmit error",c),o({type:"UPDATE_DATA",payload:{executorState:"SUBMIT_ERROR"}}),[3,4];case 4:return[2]}}))}))}),[a,o,r,e]);return(0,y.useEffect)((function(){return window.document.addEventListener(Ie,i,!1),function(){return window.document.removeEventListener(Ie,i,!1)}}),[i]),"READY"===r.executorState||"SUBMITTING"===r.executorState?{executorState:r.executorState,formDefinition:r.formDefinition,initialData:r.initialData,attachments:r.attachments}:{executorState:r.executorState}},Oe=function(e){var t=q(),n=t.selectedProcess,r=t.processPayload,o=me(null===n||void 0===n?void 0:n.key,r).startProcess,a=(0,$.I0)(),i=(0,y.useCallback)((function(t){var n;t&&(!t||t.processInstanceId)&&t.formDefinition?e({type:"UPDATE_DATA",payload:{formDefinition:JSON.parse(t.formDefinition),initialData:t.data||{},attachments:Te(null===(n=t.data)||void 0===n?void 0:n.attachments),taskId:t.taskId,processInstanceId:t.processInstanceId,executorState:"READY"}}):e({type:"SET_DATA",payload:{executorState:"PROCESS_ERROR"}})}),[e]);(0,y.useEffect)((function(){if(n){var e=!0;return ge(void 0,void 0,void 0,(function(){var t,n;return Se(this,(function(r){switch(r.label){case 0:return[4,o()];case 1:return t=null===(n=r.sent().data)||void 0===n?void 0:n.startProcess,e&&(null===t||void 0===t?void 0:t.formKey)&&(a(Z.setActiveTask(t)),a(Z.openProcessModal()),i(t)),[2]}}))})),function(){e=!1}}}),[o,i,n])},Pe=function(e,t,n){var r;(void 0===n&&(n=function(e){}),null===e||void 0===e?void 0:e.processInstanceId)&&t({type:"UPDATE_DATA",payload:{formDefinition:e.formDefinition&&JSON.parse(e.formDefinition)||void 0,initialData:e.data||{},attachments:Te(null===(r=e.data)||void 0===r?void 0:r.attachments),taskId:e.taskId,processInstanceId:e.processInstanceId,executorState:"READY"}});return{processFinished:!(null===e||void 0===e?void 0:e.formDefinition)}},we=function(e){var t,n,r,o=e.processState,a=(0,X.L$)();(null===(t=o.initialData)||void 0===t?void 0:t.import)&&Array.isArray(null===(n=o.initialData)||void 0===n?void 0:n.import)&&(o.initialData.import=null===(r=o.initialData)||void 0===r?void 0:r.import[0]);var i,s,c,l=(0,$.I0)();return(0,y.useEffect)((function(){["SUBMIT_ERROR","PROCESS_ERROR"].includes(o.executorState)&&l(Z.closeProcessModal())}),[o.executorState]),(0,p.jsxs)(p.Fragment,{children:["READY"===o.executorState&&o.formDefinition&&(0,p.jsx)(d.RQ,{src:"/",srcDoc:(i=JSON.stringify(o.formDefinition),s=o.initialData,c=o.attachments,"\n<!DOCTYPE html>\n<html lang=\"en\">\n  <div id=\"displayer\"> Loading... </div>\n  <div id=\"attachments\"></div>\n  <head>\n    <link rel='stylesheet' href='https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css'>\n    <link rel='stylesheet' href='https://cdn.form.io/formiojs/formio.full.min.css'>\n    <script src='https://cdn.form.io/formiojs/formio.full.min.js'><\/script>\n  </head>  \n  <script>\n    Formio.createForm(document.getElementById('displayer'), ".concat(i,", {})\n      .then(function(form) {    \n        form.submission = {\n          data: ").concat(JSON.stringify(s,null,2),"\n        };\n        form.on('submit', (submission) => {        \n          const event = new CustomEvent('").concat(Ie,'\', {detail: submission})\n          window.parent.document.dispatchEvent(event)\n        });\n      });\n    const attachmentsContainer = document.getElementById("attachments")\n    const attachmentsList = ').concat(JSON.stringify(c,null,2),'\n    attachmentsList.forEach(function(attachment){\n      const attachmentLink = document.createElement("a")\n      attachmentLink.setAttribute("href", attachment.url)\n      attachmentLink.setAttribute("download", attachment.name)\n      attachmentLink.append(attachment.name)\n      attachmentsContainer.append(attachmentLink);      \n    })\n  <\/script>\n</html>\n'))}),"READY"===o.executorState&&!o.formDefinition&&(0,p.jsx)(f.M5,{children:a("formDisplayer.formNotFound")}),"LOADING"===o.executorState&&(0,p.jsx)(v.p9,{}),"SUBMITTING"===o.executorState&&(0,p.jsx)(v.p9,{}),"SUBMIT_ERROR"===o.executorState&&(0,p.jsx)(f.M5,{children:(0,p.jsx)(v.xv,{value:a("formDisplayer.submitError"),variant:"h2"})}),"PROCESS_ERROR"===o.executorState&&(0,p.jsx)(f.M5,{children:(0,p.jsx)(v.xv,{value:a("formDisplayer.processError"),variant:"h2"})})]})},Re=function(){return Re=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Re.apply(this,arguments)},Ae=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ce=function(){var e=(0,$.I0)(),t=Q((function(e){return e.modalMode})),n=Q((function(e){return e.selectedProcess})),r=Q((function(e){return e.activeTask})),o=Ae((0,v.dd)(!1),3),a=o[0],i=o[1],s=o[2],c=Ee();return(0,y.useEffect)((function(){return"closed"===t?s():i(),function(){return s()}}),[t,i,s]),(0,p.jsx)(a,Re({style:{width:"98vw",height:"98vh"}},{children:(0,p.jsx)(d.J7,Re({caption:(null===n||void 0===n?void 0:n.name)||"",heading:(null===r||void 0===r?void 0:r.name)||"",footerContent:void 0,onClose:function(){(0,B.fz)({id:"process-task-closed",title:"You can continue your task later from Workflows and tasks.",variant:"note"}),e(Z.closeProcessModal())}},{children:n&&c&&(0,p.jsx)(we,{formKey:n.key,processState:c})}))}))},je=function(){return je=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},je.apply(this,arguments)},De=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},Ue=function(e){var t=e.category,n=void 0===t?"":t,r=e.payload,o=void 0===r?{}:r,a=e.onWorkflowSelected,i=void 0===a?function(e){}:a,s=e.enableFiltering,c=void 0!==s&&s,l=function(e){var t=e.category,n=void 0===t?"":t,r=e.maxCount,o=void 0===r?1e4:r,a=F((0,y.useState)([]),2),i=a[0],s=a[1],c=(0,M.aM)(L,{notifyOnNetworkStatusChange:!0,variables:{category:n,maxCount:o},onError:function(e){(0,B.fz)({id:"process-definitions-error",title:"Error, could not get workflows definitions",description:e.message,variant:"negative",persist:!0})},onCompleted:function(e){try{s(e.processDefinitions.processDefinition)}catch(t){console.error(t),(0,B.fz)({id:"failed-parsing-process-definitions",title:"Error, failed to parse workflows definitions",variant:"negative",persist:!0})}}}),l=c.data,u=c.loading;return{processes:i,data:l,error:c.error,loading:u}}({category:n}),u=l.processes,d=l.loading,f=(0,$.I0)();return q()?(0,p.jsxs)("div",je({style:{width:"100%"}},{children:[(0,p.jsx)(Ce,{}),d||!u.length?(0,p.jsx)(v.p9,{}):(0,p.jsx)("div",je({style:{width:320,height:340}},{children:(0,p.jsx)(j,{enableFiltering:c,optionsTree:{label:"",options:u.map((function(e){return{key:e.key,label:e.name,payload:{processDefinition:e}}}))},onOptionSelected:function(e){var t=De(e,1)[0].payload.processDefinition;i(t),f(Z.selectProcess(t)),f(Z.setProcessPayload(o))}})}))]})):null},Me=function(){return Me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Me.apply(this,arguments)},Be=function(e){var t=e.category,n=void 0===t?"":t,r=e.payload,o=void 0===r?{}:r,a=e.tooltip,i=void 0===a?"Start workflow":a,s=e.enableFiltering,c=void 0!==s&&s,l=e.onWorkflowSelected,u=void 0===l?function(e){}:l;return(0,p.jsx)("div",Me({style:{width:"100%"}},{children:(0,p.jsx)(v.j0,{icon:h.faPlay,spacing:"sm",outline:!0,tooltip:i,popoverPlacement:"bottom-end",popoverContentCallback:function(e){var t=e.closePopover;return(0,p.jsx)(Ue,{category:n,payload:o,onWorkflowSelected:function(e){t(),u(e)},enableFiltering:c})}})}))},Ye=function(){var e,t,n=(0,y.useState)([]),r=(0,u.Z)(n,2),o=r[0],a=r[1];return(0,p.jsx)(d.B4,{heading:"Menu Drilldown",overflow:"scroll",children:(0,p.jsxs)(f.xu,{direction:"column",children:[(0,p.jsxs)("div",{style:{width:300,height:340},children:[(0,p.jsx)(Be,{}),(0,p.jsx)(j,{enableFiltering:!0,optionsTree:{label:"Groupings",options:Object.values(Le).map((function(e){var t=e.groupBy,n=e.label,r=e.key,o=Fe.includes(r);return{label:n,payload:{tableHeader:n,groupCode:"",groupBy:t},options:o&&(null===$e||void 0===$e?void 0:$e.map((function(e){var r=e.code,o=e.name;return{label:"".concat(o," (").concat(r,")"),payload:{tableHeader:"".concat(n," (").concat(o,")"),groupBy:t,groupCode:r}}})))}}))},onOptionSelected:function(e){a(e),console.log(e)}})]}),(0,p.jsxs)("div",{style:{whiteSpace:"pre"},children:[(0,p.jsxs)("div",{style:{zoom:1.4},children:[(0,p.jsx)("strong",{children:"Selected option"})," -"," ",null===(e=JSON.stringify(o.at(-1),null,4))||void 0===e?void 0:e.replaceAll('"',"")]}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(0,p.jsx)("strong",{children:"Returned array of selected options"})," -"," ",null===(t=JSON.stringify(o,null,4))||void 0===t?void 0:t.replaceAll('"',"")]})]})})},Fe=["groupAndSector","groupAndPortfolio","portfolioAndGroup"],Le={groupAndSector:{key:"groupAndSector",groupBy:["GROUP","SECTOR","SECURITY"],label:"Asset type and class"},groupAndPortfolio:{key:"groupAndPortfolio",groupBy:["GROUP","PORTFOLIO","SECTOR"],label:"Asset type and portfolio"},securityType:{key:"securityType",groupBy:["TYPE","SECURITY"],label:"Security type"},subType:{key:"subType",groupBy:["TYPE","SUBTYPE","SECURITY"],label:"Security type and subtype"},security:{key:"security",groupBy:["SECURITY"],label:"Security"},class1:{key:"class1",groupBy:["CLASS1","SECURITY"],label:"Class 1"},class2:{key:"class2",groupBy:["CLASS2","SECURITY"],label:"Class 2"},class3:{key:"class3",groupBy:["CLASS3","SECURITY"],label:"Class 3"},class4:{key:"class4",groupBy:["CLASS4","SECURITY"],label:"Class 4"},class5:{key:"class5",groupBy:["CLASS5","SECURITY"],label:"Class 5"},country:{key:"country",groupBy:["COUNTRY","SECURITY"],label:"Country"},marketPlace:{key:"marketPlace",groupBy:["MARKETPLACE","SECURITY"],label:"Market place"},currency:{key:"currency",groupBy:["CURRENCY","SECURITY"],label:"Currency"},portfolio:{key:"portfolio",groupBy:["PORTFOLIO","TYPE","SECURITY"],label:"Portfolio"},portfolioAndSubPortfolio:{key:"portfolioAndSubPortfolio",groupBy:["PORTFOLIO","PORTFOLIO_ALL","SECURITY"],label:"Portfolio and sub portfolio"},portfolioAndGroup:{key:"portfolioAndGroup",groupBy:["PORTFOLIO","GROUP","SECTOR"],label:"Portfolio and asset type"},issuer:{key:"issuer",groupBy:["ISSUER","SECURITY"],label:"Issuer"}},$e=[{name:"Asset class",code:"ASSET"},{name:"Geographical",code:"GEO"},{name:"Industry",code:"IND"},{name:"Strategy",code:"Strategy"},{name:"Robo class",code:"ROBO"},{name:"Currency",code:"CURRENCY"},{name:"Country exposure",code:"COUNTRY"},{name:"AIF Geo",code:"AIFGEO"},{name:"AIF Asset",code:"AIFASSET"},{name:"AIF Asset Turnover",code:"AIFASSETTURNOVER"},{name:"AIF Strategies",code:"AIFSTRATEGIES"},{name:"Model",code:"MOD"},{name:"Test ST",code:"TEST_ST"},{name:"Jv strategy test",code:"JV_TEST"},{name:"INT Asset Structure",code:"INT_AS"}]}}]);
//# sourceMappingURL=3623.22f2b091.chunk.js.map